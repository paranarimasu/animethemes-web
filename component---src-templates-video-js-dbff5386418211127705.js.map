{"version":3,"sources":["webpack:///./src/components/tag/index.js","webpack:///./src/components/utils/themeEntryTags.js","webpack:///./src/components/utils/videoTags.js","webpack:///./src/components/card/searchResult/anime.js","webpack:///./src/components/button/play.js","webpack:///./src/components/card/searchResult/artist.js","webpack:///./src/templates/video.js","webpack:///./src/components/button/video.js"],"names":["StyledTag","styled","span","gapsRow","StyledTagIcon","FontAwesomeIcon","props","theme","colors","primaryLowEmphasis","warning","css","warningTitle","Tag","icon","iconProps","children","fixedWidth","small","color","primaryHighEmphasis","ThemeEntryTags","entry","flexWrap","gapsBoth","faFilm","episodes","spoiler","faBomb","nsfw","faExclamationTriangle","VideoTags","video","title","resolution","nc","faNotEqual","subbed","faClosedCaptioning","lyrics","faComment","uncen","faEye","source","faCompactDisc","toUpperCase","overlap","faStream","AnimeSearchResultCard","anime","hideThemes","smallCover","useImage","animeLink","slug","premiere","year","premiereLink","season","toLowerCase","description","to","link","themes","length","name","image","slice","filter","entries","videos","map","videoSlug","createVideoSlug","block","faEllipsisH","StyledButtonPlay","Button","StyledPrefix","div","secondaryBackground","primaryBackground","StyledBody","ButtonPlay","playing","faCircleNotch","faPlay","spin","ArtistSearchResultCard","artist","useAniListArtist","performances","StyledVideoInfo","Box","attrs","gapsColumn","VideoPage","data","siteName","useSiteMeta","useEffect","navigator","mediaSession","metadata","MediaMetadata","song","performance","as","join","undefined","album","artwork","src","sizes","type","artistStr","version","otherEntries","otherEntry","otherVideo","filename","pageTitle","pageDesc","reduce","str","index","flexDirection","alignItems","flex","justifyContent","bold","maxLines","variant","query","VideoButton","currentVideo","useContext","PlayerContext"],"mappings":"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","file":"component---src-templates-video-js-dbff5386418211127705.js","sourcesContent":["import React from \"react\";\nimport styled, {css} from \"styled-components\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {gapsRow} from \"styles/mixins\";\nimport Text from \"components/text\";\nimport theme from \"theme\";\n\nconst StyledTag = styled.span`\n    display: inline-flex;\n    flex-direction: row;\n    align-items: center;\n\n    ${gapsRow(\"0.25rem\")}\n`;\nconst StyledTagIcon = styled(FontAwesomeIcon)`\n    color: ${(props) => props.theme.colors.primaryLowEmphasis};\n\n    ${(props) => props.warning && css`\n        color: ${(props) => props.theme.colors.warningTitle};\n    `}\n`;\n\nexport default function Tag({ icon, iconProps, warning, children, ...props }) {\n    return (\n        <StyledTag {...props}>\n            {!!icon && (\n                <StyledTagIcon icon={icon} fixedWidth warning={warning} {...iconProps}/>\n            )}\n            {!!children && (\n                <Text small color={theme.colors.primaryHighEmphasis}>\n                    {children}\n                </Text>\n            )}\n        </StyledTag>\n    );\n}\n","import Tag from \"components/tag\";\nimport {faBomb, faExclamationTriangle, faFilm} from \"@fortawesome/free-solid-svg-icons\";\nimport { Flex } from \"components/flex\";\nimport React from \"react\";\n\nexport default function ThemeEntryTags({ entry }) {\n    return (\n        <Flex flexWrap=\"wrap\" gapsBoth=\"0.75rem\">\n            <Tag icon={faFilm}>\n                {entry.episodes || \"—\"}\n            </Tag>\n            {!!entry.spoiler && (\n                <Tag icon={faBomb} warning>\n                    SPOILER\n                </Tag>\n            )}\n            {!!entry.nsfw && (\n                <Tag icon={faExclamationTriangle} warning>\n                    NSFW\n                </Tag>\n            )}\n        </Flex>\n    );\n}\n","import {\n    faClosedCaptioning,\n    faComment,\n    faCompactDisc,\n    faEye,\n    faNotEqual,\n    faStream\n} from \"@fortawesome/free-solid-svg-icons\";\nimport Tag from \"components/tag\";\nimport { Flex } from \"components/flex\";\n\nexport default function VideoTags({ video }) {\n    return (\n        <Flex flexWrap=\"wrap\" gapsBoth=\"0.75rem\">\n            <Tag title=\"Resolution\">\n                {video.resolution}p\n            </Tag>\n\n            {!!video.nc && (\n                <Tag icon={faNotEqual} title=\"No Credits\"/>\n            )}\n\n            {!!video.subbed && (\n                <Tag icon={faClosedCaptioning} title=\"With Subtitles\"/>\n            )}\n\n            {!!video.lyrics && (\n                <Tag icon={faComment} title=\"With Lyrics\"/>\n            )}\n\n            {!!video.uncen && (\n                <Tag icon={faEye} title=\"Uncensored\"/>\n            )}\n\n            {!!video.source && (\n                <Tag icon={faCompactDisc} title=\"Source\">\n                    {video.source.toUpperCase()}\n                </Tag>\n            )}\n\n            {video.overlap !== \"None\" && (\n                <Tag icon={faStream} title=\"Overlap\">\n                    {video.overlap.toUpperCase()}\n                </Tag>\n            )}\n        </Flex>\n    );\n}\n","import {Link} from \"gatsby\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faEllipsisH} from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"components/button\";\nimport Text from \"components/text\";\nimport SearchResultCard, {SearchResultDescription} from \"components/card/searchResult\";\nimport Elevator from \"components/elevator\";\nimport ButtonPlay from \"components/button/play\";\nimport useImage from \"hooks/useImage\";\nimport createVideoSlug from \"utils/createVideoSlug\";\nimport { Flex } from \"components/flex\";\n\nexport default function AnimeSearchResultCard({ anime, hideThemes = false }) {\n    const { smallCover } = useImage(anime);\n\n    const animeLink = `/anime/${anime.slug}`;\n\n    let premiere = anime.year;\n    let premiereLink = `/year/${anime.year}`;\n    if (anime.season) {\n        premiere = anime.season + \" \" + premiere;\n        premiereLink += `/${anime.season.toLowerCase()}`;\n    }\n\n    let description = (\n        <SearchResultDescription>\n            <span>Anime</span>\n            {!!premiere && (\n                <Link to={premiereLink}>\n                    <Text link>{premiere}</Text>\n                </Link>\n            )}\n            <span>{anime.themes.length} themes</span>\n        </SearchResultDescription>\n    );\n\n    return (\n        <SearchResultCard\n            title={anime.name}\n            description={description}\n            image={smallCover}\n            to={animeLink}\n        >\n            {!hideThemes && (\n                <Elevator>\n                    <Flex flexWrap=\"wrap\" gapsBoth=\"0.75rem\">\n                        {anime.themes\n                            .slice(0, 4)\n                            .filter((theme) => theme.entries.length && theme.entries[0].videos.length)\n                            .map((theme) => {\n                                const entry = theme.entries[0];\n                                const video = entry.videos[0];\n                                const videoSlug = createVideoSlug(theme, entry, video);\n\n                                return (\n                                    <ButtonPlay key={theme.slug} to={`/anime/${anime.slug}/${videoSlug}`}>\n                                        <Text small block>{theme.slug}</Text>\n                                    </ButtonPlay>\n                                );\n                            })\n                        }\n                        {anime.themes.length > 4 && (\n                            <Button icon title=\"Show all themes\" to={animeLink}>\n                                <FontAwesomeIcon icon={faEllipsisH} fixedWidth/>\n                            </Button>\n                        )}\n                    </Flex>\n                </Elevator>\n            )}\n        </SearchResultCard>\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faCircleNotch, faPlay} from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"components/button\";\n\nconst StyledButtonPlay = styled(Button)`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    margin-left: 1rem;\n    padding: 0 0.5rem 0 0;\n`;\nconst StyledPrefix = styled.div`\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 2rem;\n    height: 2rem;\n    margin-left: -1rem;\n    border-radius: 1rem;\n\n    background-color: ${(props) => props.theme.colors.secondaryBackground};\n    color: ${(props) => props.theme.colors.primaryBackground[0]};\n`;\nconst StyledBody = styled.div`\n    padding: 0.5rem;  \n`;\n\nexport default function ButtonPlay({ children, playing, ...props }) {\n    return (\n        <StyledButtonPlay {...props}>\n            <StyledPrefix>\n                <FontAwesomeIcon icon={playing ? faCircleNotch : faPlay} spin={playing} fixedWidth />\n            </StyledPrefix>\n            <StyledBody>\n                {children}\n            </StyledBody>\n        </StyledButtonPlay>\n    );\n}\n","import React from \"react\";\nimport useAniListArtist from \"hooks/useAniListArtist\";\nimport SearchResultCard, {SearchResultDescription} from \"components/card/searchResult\";\n\nexport default function ArtistSearchResultCard({ artist }) {\n    const { image } = useAniListArtist(artist);\n\n    const description = (\n        <SearchResultDescription>\n            <span>Artist</span>\n            {!!artist.performances && (\n                <span>{artist.performances.length} songs</span>\n            )}\n        </SearchResultDescription>\n    );\n\n    return (\n        <SearchResultCard\n            title={artist.name}\n            description={description}\n            image={image}\n            to={`/artist/${artist.slug}`}\n        />\n    );\n}\n","import { Fragment, useEffect } from \"react\";\nimport { graphql, Link } from \"gatsby\";\nimport { Flex, Box } from \"components/flex\";\nimport styled from \"styled-components\";\nimport Text from \"components/text\";\nimport useSiteMeta from \"hooks/useSiteMeta\";\nimport SongTitleWithArtists from \"components/utils/songTitleWithArtists\";\nimport VideoTags from \"components/utils/videoTags\";\nimport ThemeEntryTags from \"components/utils/themeEntryTags\";\nimport Title from \"components/text/title\";\nimport VideoButton from \"components/button/video\";\nimport AnimeSearchResultCard from \"components/card/searchResult/anime\";\nimport ArtistSearchResultCard from \"components/card/searchResult/artist\";\nimport SEO from \"components/seo\";\nimport useImage from \"hooks/useImage\";\n\nconst StyledVideoInfo = styled(Box).attrs({\n    gapsColumn: \"2rem\"\n})`\n    @media (min-width: 721px) {\n        padding: 0 1rem;\n    }\n`;\n\nexport default function VideoPage({ data: { video, entry } }) {\n    const theme = entry.theme;\n    const anime = theme.anime;\n\n    const { siteName } = useSiteMeta();\n    const { smallCover } = useImage(anime);\n\n    useEffect(() => {\n        if (theme && smallCover) {\n            // eslint-disable-next-line no-undef\n            navigator.mediaSession.metadata = new MediaMetadata({\n                title: `${theme.slug} • ${theme.song.title}`,\n                artist: theme.song.performances ? theme.song.performances.map((performance) => performance.as || performance.artist.name).join(\", \") : undefined,\n                album: anime.name,\n                artwork: [\n                    { src: smallCover, sizes: \"512x512\", type: \"image/jpeg\" }\n                ]\n            });\n        }\n    }, [ anime, theme, smallCover ]);\n\n    const otherEntries = theme.entries.map(otherEntry => {\n        const videos = otherEntry.videos.filter((otherVideo) => otherVideo.filename !== video.filename);\n\n        if (!videos.length) {\n            return null;\n        }\n\n        return {\n            ...otherEntry,\n            videos\n        };\n    }).filter((otherEntry) => !!otherEntry);\n\n    // Generates and returns page title\n    const pageTitle = entry.version\n        ? `${theme.song.title} (${anime.name} ${theme.slug} V${entry.version})`\n        : `${theme.song.title} (${anime.name} ${theme.slug})`;\n\n    const pageDesc = (() => {\n        // Generates and returns page description for SEO\n        let song = theme.song,\n            artistStr = \"\",\n            version = entry.version ? ` Version ${entry.version}` : \"\";\n        if (song.performances && song.performances.length) {\n            artistStr = song.performances.reduce((str, performance, index, { length }) => {\n                str += performance.as || performance.artist.name;\n                if (index < length - 1) {\n                    str += (index === length - 2 ? \" & \" : \", \");\n                }\n                return str;\n            }, \" by \");\n        }\n        return `Watch ${anime.name} ${theme.slug}${version}: ${song.title}${artistStr} on ${siteName}`;\n    })();\n\n    return (\n        <StyledVideoInfo>\n            <SEO title={pageTitle} description={pageDesc} />\n            <Flex flexDirection={[\"column\", \"row\"]} alignItems={[\"flex-start\", \"center\"]} gapsRow={[0, \"1rem\"]} gapsColumn={[\"1rem\", 0]}>\n                <Box flex=\"1\">\n                    <Flex flexDirection=\"column\" justifyContent=\"center\" gapsColumn=\"0.25rem\">\n                        <Text bold>\n                            <SongTitleWithArtists song={theme.song}/>\n                        </Text>\n                        <Text small maxLines={1}>\n                            <Text>{theme.slug} from </Text>\n                            <Link to={`/anime/${anime.slug}`}>\n                                <Text link>{anime.name}</Text>\n                            </Link>\n                        </Text>\n                    </Flex>\n                </Box>\n                <Flex alignItems=\"center\" gapsRow=\"0.5rem\">\n                    <Text small>Version {entry.version || 1}</Text>\n                    <ThemeEntryTags entry={entry}/>\n                    <Text link>&bull;</Text>\n                    <VideoTags video={video}/>\n                </Flex>\n            </Flex>\n            <Flex flexDirection={[\"column\", \"row\"]} gapsColumn={[\"2rem\", 0]} gapsRow={[0, \"2rem\"]}>\n                <Box flex=\"2\">\n                    <Box gapsColumn=\"1rem\">\n                        <Title variant=\"section\">Related entries</Title>\n                        <Flex flexDirection={[\"column\", \"row\"]} gapsColumn={[\"1rem\", 0]} gapsRow={[0, \"1rem\"]}>\n                            <Box flex=\"1\">\n                                <AnimeSearchResultCard anime={anime} hideThemes/>\n                            </Box>\n                            <Box flex=\"1\">\n                                <Box gapsColumn=\"1rem\">\n                                    {!!theme.song.performances && theme.song.performances.map((performance) => (\n                                        <ArtistSearchResultCard key={performance.artist.name} artist={performance.artist}/>\n                                    ))}\n                                </Box>\n                            </Box>\n                        </Flex>\n                    </Box>\n                </Box>\n                <Box flex=\"1\">\n                    {!!otherEntries.length && (\n                        <Flex flexDirection=\"column\" gapsColumn=\"1rem\" alignItems={[\"flex-start\", \"flex-end\"]}>\n                            <Title variant=\"section\">Other versions</Title>\n                            {otherEntries.map((otherEntry) => (\n                                <Fragment key={otherEntry.version}>\n                                    <Flex alignItems=\"center\" gapsRow=\"0.5rem\">\n                                        <Text small>Version {otherEntry.version || 1}</Text>\n                                        <ThemeEntryTags entry={otherEntry}/>\n                                    </Flex>\n                                    {otherEntry.videos.map((video, index) => (\n                                        <VideoButton\n                                            key={index}\n                                            anime={anime}\n                                            theme={theme}\n                                            entry={entry}\n                                            video={video}\n                                        />\n                                    ))}\n                                </Fragment>\n                            ))}\n                        </Flex>\n                    )}\n                </Box>\n            </Flex>\n        </StyledVideoInfo>\n    );\n}\n\nexport const query = graphql`\n    query($id: String!, $entryId: String!) {\n        video(id: { eq: $id }) {\n            filename\n            basename\n            link\n            lyrics\n            nc\n            overlap\n            resolution\n            source\n            subbed\n            uncen\n        }\n        entry(id: { eq: $entryId }) {\n            episodes\n            nsfw\n            spoiler\n            version\n            theme {\n                slug\n                anime {\n                    name\n                    slug\n                    year\n                    season\n                    themes {\n                        slug\n                    }\n                    resources {\n                        site\n                        link\n                    }\n                    images {\n                        facet\n                        link\n                    }\n                }\n                song {\n                    title\n                    performances {\n                        artist {\n                            name\n                            slug\n                        }\n                        as\n                    }\n                }\n                entries {\n                    episodes\n                    nsfw\n                    spoiler\n                    version\n                    videos {\n                        filename\n                        lyrics\n                        nc\n                        overlap\n                        resolution\n                        source\n                        subbed\n                        uncen\n                    }\n                }\n                ...VideoSlug\n            }\n        }\n    }\n`\n","import ButtonPlay from \"components/button/play\";\nimport VideoTags from \"components/utils/videoTags\";\nimport {useContext} from \"react\";\nimport PlayerContext from \"context/playerContext\";\nimport createVideoSlug from \"utils/createVideoSlug\";\n\nexport default function VideoButton({ anime, theme, entry, video, ...props }) {\n    const { currentVideo } = useContext(PlayerContext);\n    const videoSlug = createVideoSlug(theme, entry, video);\n\n    return (\n        <ButtonPlay to={`/anime/${anime.slug}/${videoSlug}`} playing={currentVideo && currentVideo.filename === video.filename} {...props}>\n            <VideoTags video={video}/>\n        </ButtonPlay>\n    );\n}\n"],"sourceRoot":""}