(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"6buQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("nKUr"),c=n("Wbzz"),i=n("IgWi"),a=n("ISyE"),s=n("gSOQ"),o=n("VtrM"),u=n("brmo");var l=n("5Vy0");function d(e){var t,n=e.theme,d=(t=n.anime.slug,Object(o.a)(u.baseUrl+"/api/anime/"+t,(function(e){return fetch(e).then((function(e){return e.json()}))})).data),j=Object(i.a)(d).image;if(!n.entries[0]||!n.entries[0].videos[0])return null;var h=Object(r.jsxs)(a.a,{children:[Object(r.jsx)("span",{children:"Theme"}),Object(r.jsx)("span",{children:n.slug}),Object(r.jsx)(c.Link,{to:"/anime/"+n.anime.slug,children:Object(r.jsx)(l.a,{link:!0,children:n.anime.name})})]});return Object(r.jsx)(a.b,{title:Object(r.jsx)(s.a,{song:n.song}),description:h,image:j,to:"/video/"+n.entries[0].videos[0].filename})}},"8VZ4":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("zLVn"),c=n("nKUr"),i=(n("q1tI"),n("vOnD")),a=n("CRzS"),s=n("89ka"),o=i.d.div.withConfig({displayName:"switcher__StyledSwitcher",componentId:"sc-7tfmzq-0"})(["display:flex;flex-direction:row;background-color:",";border-radius:1rem;",""],a.a,Object(s.c)("0.5rem"));function u(e){var t=e.children,n=Object(r.a)(e,["children"]);return Object(c.jsx)(o,Object.assign({},n,{children:t}))}},Bxyr:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n("nKUr"),c=n("q1tI"),i=n("vOnD"),a=n("Wbzz");function s(e,t){return e===t}function o(e,t,n){var r=n&&n.equalityFn?n.equalityFn:s,i=Object(c.useState)(e),a=i[0],o=i[1],u=function(e,t,n){void 0===n&&(n={});var r=n.maxWait,i=Object(c.useRef)(null),a=Object(c.useRef)([]),s=n.leading,o=void 0===n.trailing||n.trailing,u=Object(c.useRef)(!1),l=Object(c.useRef)(null),d=Object(c.useRef)(!1),j=Object(c.useRef)(e);j.current=e;var h=Object(c.useCallback)((function(){clearTimeout(l.current),clearTimeout(i.current),i.current=null,a.current=[],l.current=null,u.current=!1}),[]);Object(c.useEffect)((function(){return d.current=!1,function(){d.current=!0}}),[]);var f=Object(c.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];a.current=e,clearTimeout(l.current),u.current&&(u.current=!1),l.current||!s||u.current||(j.current.apply(j,e),u.current=!0),l.current=setTimeout((function(){var t=!0;s&&u.current&&(t=!1),h(),!d.current&&o&&t&&j.current.apply(j,e)}),t),r&&!i.current&&o&&(i.current=setTimeout((function(){var e=a.current;h(),d.current||j.current.apply(null,e)}),r))}),[r,t,h,s,o]),m=Object(c.useCallback)((function(){l.current&&(j.current.apply(null,a.current),h())}),[h]);return[f,h,m]}(Object(c.useCallback)((function(e){return o(e)}),[]),t,n),l=u[0],d=u[1],j=u[2],h=Object(c.useRef)(e);return Object(c.useEffect)((function(){r(h.current,e)||(l(e),h.current=e)}),[e,l,r]),[a,d,j]}var u=n("/fsE"),l=n("YwZP"),d=n("IP2g"),j=n("wHSu"),h=n("o0o1"),f=n.n(h),m=(n("ls82"),n("HaE+")),b=n("VtrM"),p=n("brmo");function O(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=["anime","themes","artists"],y={animeResults:[],themeResults:[],artistResults:[]};function v(e){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(f.a.mark((function e(t){var n,r,c,i,a,s,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:for(r=e.sent,c=r.anime,i=r.themes,a=r.artists,s=O(i);!(o=s()).done;)(u=o.value).song.performances=u.song.artists.map((function(e){return{artist:e,as:e.as}}));return e.abrupt("return",{animeResults:c,themeResults:i,artistResults:a});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n("aEzc"),I=n("6buQ"),R=n("FT44"),k=n("5Vy0"),C=n("B8aR"),E=n("f019"),_=n("L+1Y");function U(e){var t=e.searchQuery,n=e.searchEntity,i=function(e){var t=Object(b.a)(p.baseUrl+"/api/search?fields="+g.join()+"&q="+encodeURIComponent(e),v),n=t.data,r=t.isValidating,i=Object(c.useRef)(y);return e?void 0!==n&&(i.current=n):i.current=y,[i.current,r]}(t),a=i[0],s=i[1];if(!t)return Object(r.jsx)(k.a,{block:!0,children:"Type in a query to begin searching."});var o=a.animeResults,u=a.themeResults,l=a.artistResults;return o.length+u.length+l.length?Object(r.jsxs)(_.b,{gapsColumn:"2rem",children:[Object(r.jsx)(T,{searchEntity:n,entity:"anime",title:"Anime",results:o}),Object(r.jsx)(T,{searchEntity:n,entity:"theme",title:"Themes",results:u}),Object(r.jsx)(T,{searchEntity:n,entity:"artist",title:"Artist",results:l})]}):s?Object(r.jsx)(k.a,{block:!0,children:"Searching..."}):Object(r.jsxs)(k.a,{block:!0,children:['No results found for query "',t,'". Did you spell it correctly?']})}function T(e){var t=e.searchEntity,n=e.entity,c=e.title,i=e.results,a=Object(l.useLocation)(),s=a.search+a.hash,o=i.length;if(t&&t!==n||!i.length)return null;t||(i=i.slice(0,3));var u=i.map((function(e){switch(n){case"anime":return Object(r.jsx)(S.a,{anime:e},e.id);case"theme":return Object(r.jsx)(I.a,{theme:e},e.id);case"artist":return Object(r.jsx)(E.a,{artist:e},e.id);default:return null}}));return Object(r.jsxs)(_.b,{gapsColumn:"1rem",children:[!t&&Object(r.jsx)(C.a,{variant:"section",children:c}),u,!t&&o>3&&Object(r.jsx)(_.b,{row:!0,justifyContent:"center",children:Object(r.jsx)(R.a,{to:"/search/"+n+s,icon:!0,children:Object(r.jsx)(d.a,{icon:j.d,fixedWidth:!0})})})]})}var q=n("89ka"),z=n("8VZ4"),L=n("jNNy"),V=i.d.div.withConfig({displayName:"search__StyledSearchPage",componentId:"sc-1mbyf7d-0"})(["",""],Object(q.b)("1.5rem")),P=Object(i.d)(_.b).withConfig({displayName:"search__StyledSearchOptions",componentId:"sc-1mbyf7d-1"})(["@media (min-width:721px){flex-direction:row;","}@media (max-width:720px){flex-direction:column;align-items:center;","}"],Object(q.c)("1rem"),Object(q.b)("1rem"));function A(e){var t=e.location,n=t.pathname,i=t.search,s=t.hash,l=Object(c.useMemo)((function(){return n.match(/\/search(?:\/(.+))?/)[1]}),[n]),h=Object(c.useMemo)((function(){return new URLSearchParams(i)}),[i]),f=i+s,m=Object(c.useState)(h.get("q")||""),b=m[0],p=m[1],O=o(b,500)[0],x=b&&b.trim()?b+" - Search":"Search";return Object(c.useEffect)((function(){p(h.get("q"))}),[h]),Object(c.useEffect)((function(){var e=new URLSearchParams;b&&e.set("q",b);var t=e.toString(),n="/search";l&&(n+="/"+l),t&&(n+="?"+t),Object(a.navigate)(n,{replace:!0})}),[l,b]),Object(r.jsxs)(V,{children:[Object(r.jsx)(L.a,{title:x}),Object(r.jsx)(C.a,{children:"Search"}),Object(r.jsxs)(P,{children:[Object(r.jsx)(_.a,{flex:1,children:Object(r.jsx)(u.a,{query:b,setQuery:p,isSearching:!1})}),Object(r.jsxs)(z.a,{children:[!!l&&Object(r.jsx)(R.a,{icon:!0,to:"/search"+f,children:Object(r.jsx)(d.a,{icon:j.y,fixedWidth:!0})}),Object(r.jsx)(R.a,{to:"/search/anime"+f,active:"anime"===l,children:"Anime"}),Object(r.jsx)(R.a,{to:"/search/theme"+f,active:"theme"===l,children:"Themes"}),Object(r.jsx)(R.a,{to:"/search/artist"+f,active:"artist"===l,children:"Artists"})]})]}),Object(r.jsx)(U,{searchEntity:l,searchQuery:O})]})}},ISyE:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return p}));var r=n("zLVn"),c=n("nKUr"),i=(n("q1tI"),n("Wbzz")),a=n("5Vy0"),s=n("vOnD"),o=n("4Fil"),u=n("89ka"),l=n("C+fU"),d=Object(s.d)(o.a).withConfig({displayName:"searchResult__StyledSearchResultCard",componentId:"gogu5j-0"})(["display:flex;flex-direction:row;align-items:center;padding:0 1rem 0 0;"]),j=s.d.img.withConfig({displayName:"searchResult__StyledCover",componentId:"gogu5j-1"})(["width:48px;height:64px;object-fit:cover;"]),h=s.d.div.withConfig({displayName:"searchResult__StyledBody",componentId:"gogu5j-2"})(["flex:1;display:flex;flex-direction:column;justify-content:center;","   padding:0 1rem;"],Object(u.b)("0.25rem")),f=s.d.div.withConfig({displayName:"searchResult__StyledChildren",componentId:"gogu5j-3"})(["@media (max-width:720px){display:none;}"]),m=Object(s.d)(i.Link).withConfig({displayName:"searchResult__StyledLink",componentId:"gogu5j-4"})(["display:block;"]);function b(e){var t=e.title,n=e.description,i=e.image,s=e.to,o=e.children,u=Object(r.a)(e,["title","description","image","to","children"]),b=Object(c.jsxs)(d,Object.assign({},u,{children:[Object(c.jsx)(j,{alt:"Cover",src:i}),Object(c.jsxs)(h,{children:[Object(c.jsx)(a.a,{bold:!0,color:l.b.colors.secondaryTitle,maxLines:2,children:t}),Object(c.jsx)(a.a,{small:!0,maxLines:1,children:n})]}),Object(c.jsx)(f,{children:o})]}));return s?Object(c.jsx)(m,{to:s,children:b}):b}function p(e){return e.children.filter((function(e){return!!e})).map((function(e,t,n){var r=n.length;return Object(c.jsxs)(a.a,{color:l.b.colors.primaryMediumEmphasis,children:[Object(c.jsx)("span",{children:e}),t<r-1&&Object(c.jsx)("span",{color:l.b.colors.primaryMediumEmphasis,children:" â€¢ "})]})}))}},QVVT:function(e,t){var n=new Map;e.exports=function(e,t){return n.has(e)||n.set(e,t(e)),n.get(e)}},aEzc:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("nKUr"),c=n("Wbzz"),i=n("IP2g"),a=n("wHSu"),s=n("FT44"),o=n("L+1Y"),u=n("5Vy0"),l=n("IgWi"),d=n("ISyE"),j=n("m/zQ"),h=n("aXge");function f(e){var t=e.anime,n=e.hideThemes,f=void 0!==n&&n,m=Object(l.a)(t).image,b=t.year,p="/year/"+t.year;t.season&&(b=t.season+" "+b,p+="/"+t.season.toLowerCase());var O=Object(r.jsxs)(d.a,{children:[Object(r.jsx)("span",{children:"Anime"}),!!b&&Object(r.jsx)(c.Link,{to:p,children:Object(r.jsx)(u.a,{link:!0,children:b})}),Object(r.jsxs)("span",{children:[t.themes.length," themes"]})]});return Object(r.jsx)(d.b,{title:t.name,description:O,image:m,to:"/anime/"+t.slug,children:!f&&Object(r.jsx)(j.a,{children:Object(r.jsxs)(o.b,{row:!0,wrap:!0,gapsBoth:"0.75rem",children:[t.themes.slice(0,4).filter((function(e){return e.entries.length&&e.entries[0].videos.length})).map((function(e){return Object(r.jsx)(h.a,{to:"/video/"+e.entries[0].videos[0].filename,children:Object(r.jsx)(u.a,{small:!0,block:!0,children:e.slug})},e.id)})),t.themes.length>4&&Object(r.jsx)(s.a,{icon:!0,title:"Show all themes",children:Object(r.jsx)(i.a,{icon:a.j,fixedWidth:!0})})]})})})}},aXge:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("zLVn"),c=n("nKUr"),i=(n("q1tI"),n("vOnD")),a=n("IP2g"),s=n("wHSu"),o=n("FT44"),u=Object(i.d)(o.a).withConfig({displayName:"play__StyledButtonPlay",componentId:"sc-1xaulno-0"})(["display:flex;flex-direction:row;align-items:center;margin-left:1rem;padding:0 0.5rem 0 0;"]),l=i.d.div.withConfig({displayName:"play__StyledPrefix",componentId:"sc-1xaulno-1"})(["display:inline-flex;justify-content:center;align-items:center;width:2rem;height:2rem;margin-left:-1rem;border-radius:1rem;background-color:",";color:",";"],(function(e){return e.theme.colors.secondaryBackground}),(function(e){return e.theme.colors.primaryBackground[0]})),d=i.d.div.withConfig({displayName:"play__StyledBody",componentId:"sc-1xaulno-2"})(["padding:0.5rem;"]);function j(e){var t=e.children,n=e.playing,i=Object(r.a)(e,["children","playing"]);return Object(c.jsxs)(u,Object.assign({},i,{children:[Object(c.jsx)(l,{children:Object(c.jsx)(a.a,{icon:n?s.e:s.u,spin:n,fixedWidth:!0})}),Object(c.jsx)(d,{children:t})]}))}},brmo:function(e,t,n){var r=n("o0o1");n("ls82");var c=n("yXPU"),i=n("oY9k"),a=n("QVVT"),s={}.GATSBY_API_URL||"https://animethemes.dev";function o(){return(o=c(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 5:return e.next=7,a(t,(function(e){return i(e,n).then((function(e){return e.json()}))}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={baseUrl:s,fetchJsonCached:function(e,t){return o.apply(this,arguments)},createFieldParams:function(e){return Object.entries(e).map((function(e){return"fields["+e[0]+"]="+e[1].join()})).join("&")}}},f019:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("nKUr"),c=(n("q1tI"),n("xQ4I")),i=n("ISyE");function a(e){var t=e.artist,n=Object(c.a)(t).image,a=Object(r.jsxs)(i.a,{children:[Object(r.jsx)("span",{children:"Artist"}),!!t.performances&&Object(r.jsxs)("span",{children:[t.performances.length," songs"]})]});return Object(r.jsx)(i.b,{title:t.name,description:a,image:n,to:"/artist/"+t.slug})}},gSOQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("nKUr"),c=n("5Vy0"),i=n("Wbzz"),a=n("C+fU");function s(e){var t=e.song;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(c.a,{color:a.b.colors.secondaryTitle,children:t.title}),!!t.performances&&!!t.performances.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(c.a,{small:!0,color:a.b.colors.primaryMediumEmphasis,children:" by "}),t.performances.map((function(e,n){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.Link,{to:"/artist/"+e.artist.slug,children:Object(r.jsx)(c.a,{link:!0,children:e.as||e.artist.name},e.as||e.artist.name)}),n<t.performances.length-1&&Object(r.jsx)(c.a,{small:!0,color:a.b.colors.primaryMediumEmphasis,children:n===t.performances.length-2?" & ":", "})]})}))]})]})}},oY9k:function(e,t,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},xQ4I:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("7L65"),c=n("q1tI");function i(e){var t=Object(c.useState)(null),n=t[0],i=t[1];return Object(c.useEffect)((function(){var t=!1;return Object(r.a)(e.name).then((function(e){t||i(e.image)})),function(){t=!0}}),[e]),{image:n}}},yXPU:function(e,t){function n(e,t,n,r,c,i,a){try{var s=e[i](a),o=s.value}catch(u){return void n(u)}s.done?t(o):Promise.resolve(o).then(r,c)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(c,i){var a=e.apply(t,r);function s(e){n(a,c,i,s,o,"next",e)}function o(e){n(a,c,i,s,o,"throw",e)}s(void 0)}))}}}}]);
//# sourceMappingURL=component---src-pages-search-js-faa4099b226faf2908b4.js.map